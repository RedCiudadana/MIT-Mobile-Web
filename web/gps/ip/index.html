<?php
$page->title($inst_name.' Mobile Web: GPS Test')
     ->navbar_image('title-about')
     ->breadcrumbs('GPS Test')
     ->breadcrumb_home();

$page->content_begin();
?>

	 <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;sensor=true&amp;key=ABQIAAAAgl5MtLeiQwCMBX7FdoPP_BTfAZWzJoh_gYMfdqhKwTyraOPtpRSIZm3YBA6TbcecvlyiMX_gNejDzg" type="text/javascript"></script>
	
   <div class="focal">
	    <p>This should show your location on a Google Map based on your iPhone's GPS unit. You have to load the map the first time only because I'm not going to mess around with the MIT Mobile Web Templates.</p>
   		<center>
				<div id="map_canvas" style="width: 300px; height: 300px"><a href="#" onclick="navigator.geolocation.getCurrentPosition(initialize);">Load Map</a></div>
			</center>
   </div>

   <script type="text/javascript">
	   function initialize(position) {
		   document.getElementById("map_canvas").inner_html = ''
		   var map = new GMap2(document.getElementById("map_canvas"));
		   map.setCenter(new GLatLng(position.coords.latitude, position.coords.longitude), 13);
		   map.setUIToDefault();
		 }
   </script>

<? $page->content_end(); ?>
