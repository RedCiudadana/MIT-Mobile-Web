<? $page_title = "Details"; ?>
<? $help_on = true; ?>

<? php
class Item {
    public $person;

    public function __construct($person) {
        $this->person = $person;
    }

    public function display($label, $field, $href=NULL, $class=NULL, $group=False) {
        foreach($this->person[$field] as $value) {
          ?>
            <? if(!$group) { ?> <ul> <? } ?>
              <li>
                 <? if($href != NULL) {                   
                     echo '<a href="' . $href($value) . '" class="' . $class . '">';
                 } ?>

                 <div class="label"><?=$label?></div>
                 <div class="value"><?=$value?></div>

                 <? if($href != NULL) {                   
                       echo "</a>";
                 } ?>
              </li>
            <? if (!$group) { ?>  </ul>  <? } ?>   
          <?
        }
    }
}             
$item = new Item($person);
?>

<div id="people-detail">

	<? include("../templates/iphone/toolbar.html"); ?>
	
	<ul>
    <? $item->display('name', 'fullname', NULL, NULL, True); ?>
    <? $item->display('title', 'title', NULL, NULL, True); ?>
    <? $item->display('dept', 'dept', NULL, NULL, True); ?>
	</ul>
	
   <? if (has_phone($person) && ($item->person['telephone'][0] != '000-000-0000')) { ?>
      <ul> 
        <? $item->display('phone', 'telephone', "phoneHREF", 'phone', True);  ?>
      </ul>
   <? } ?>

   <? $item->display('fax', 'fax', 'phoneHREF', 'phone'); ?>
   <ul>
      <? if ($item->person['affiliation'][0] == 'facstaff') { $item->display('address', 'address', NULL, NULL, True); } ?>
   </ul> 
   <?
      $item->display('email', 'email', "mailHREF", 'email');             
      $item->display('office', 'room', "mapHREF", 'map');
   ?>

	<div class="nonfocal">
		<form method="get" action="vcard.php">
			<fieldset class="inputcombo emphasized">
				<input type="hidden" name="username" value="<?=$_REQUEST['username']?>">
				<input class="forminput" type="text" id="filter" name="email" placeholder="Enter Email Address for vCard" />
				<input class="combobutton" id="sch_btn" src="../webkit/images/email-button.png" type="image" />
			</fieldset>	
		</form>
	</div>
	
	<? include("../templates/iphone/info.html"); ?>

</div>

