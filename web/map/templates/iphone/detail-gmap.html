<? $page_title = "Detail"; ?>
<? $help_on = true; ?>

<div id="map-detail">
	
	<? include("../templates/iphone/toolbar.html"); ?>

  <? $break = true; ?>
	
	<!--<div id="map-container"></div>-->

	<div id="map-container">
		<div id="map-info" style="position: absolute; z-index: 1000; top: 45px; background-color: rgb(0,0,0); opacity: .8; width: 320px; padding: 6px 10px 6px 10px;">
			<? if ($data[0]['subtype'] != "") { 
		        $marker_type = $marker_types[$data[0]['subtype']]; 
		     } else { 
		        $marker_type = $marker_types[$data[0]['type']]; 
		     } ?>
			<h2 style="color: white; margin: 0; padding: 0; border: 0;"><?=$data[0]['name']?> <? if ($data[0]['code'] != '') { ?>(<?=$data[0]['code']?>)<? } ?> <!--<img src="/map/images/ip_markers/apartment.png" height="20" width="17" alt="Marker" />-->  
				 <? if ($data[0]['wifi'] == 'Y') { ?><!--<img src="/map/images/ip_markers/wifi.png" height="20" width="17" alt="WiFi" />--><? } ?></h2>
			<p class="address">
				 <? if ($data[0]['campus'] != '') { ?>On the <?=$data[0]['campus']?> Campus<br /><? } ?>
			   <? if ($parent == true) { ?>Located inside the <a href="<?=detailURL($parent_data[0]['id'],$parent_data[0]['latitude'],$parent_data[0]['longitude'])?>"><?=$parent_data[0]['name']?></a><? } else { ?><?=$data[0]['physical_address']?> <? } ?>
			   <? if ($data[0]['hours'] != '') { ?><br />Open <?=str_replace('"','',$data[0]['hours'])?><? } ?>
		     <? if ($data[0]['phone'] != '') { ?><br /><a style="color: white;" href="tel:1<?=$data[0]['phone']?>"><?=$data[0]['phone']?></a><? $break = false; ?><? } ?>
			   <? if ($data[0]['website'] != '') { ?><? if ($break == true) { ?><br /><? } else { ?> | <? } ?><a style="color: white;"  href="http://<?=$data[0]['website']?>">website</a><? } ?>
			</p>
		</div>
		
		
		<div id="map_canvas"></div>
		</div>
		<!-- GOOGLE MAPS v2 VERSION -->
		<script type="text/javascript">
			function map_initialize() {
				var map = new GMap2(document.getElementById("map_canvas"),{ size: new GSize(320,415) });
				//map.setUIToDefault();
				map.setCenter(new GLatLng(<?=$data[0]['latitude']?>, <?=$data[0]['longitude']?>), 16);

				var point = new GLatLng(<?=$data[0]['latitude']?>, <?=$data[0]['longitude']?>);

				var baseIcon = new GIcon(G_DEFAULT_ICON);
				baseIcon.image = "/map/images/ip_markers/apartment.png";
				baseIcon.shadow = "/map/images/ip_markers/shadow.png";
				baseIcon.iconSize = new GSize(32, 37);
				baseIcon.shadowSize = new GSize(51, 37);

				markerOptions = { icon:baseIcon };
				var marker = new GMarker(point, markerOptions);
				map.addOverlay(marker);
			
				var mapTypeControl = new GMenuMapTypeControl();
				var mapZoomControl = new GSmallZoomControl3D();
				var bottomRight = new GControlPosition(G_ANCHOR_BOTTOM_RIGHT, new GSize(10,10));
				var bottomLeft = new GControlPosition(G_ANCHOR_BOTTOM_LEFT, new GSize(10,10));
				map.addControl(mapTypeControl, bottomRight);
				map.addControl(mapZoomControl, bottomLeft);
			}
		</script>
	
		<!-- GOOGLE MAPS v3 VERSION                                           -->
		<!-- CAN'T PROPERLY PLACE CONTROLS WITH AN OFFSET BUT OTHERWISE WORKS -->
		<!--
		<div id="map-overflow" style="overflow: hidden; width: 320px; height: 415px; text-align: center;">
			<div id="map_canvas" style="width: 360px; height: 445px; margin-left: -20px; margin-top: -20px;"></div>
		</div>
		-->
		<script type="text/javascript">
			//function map_initialize() {
				//var latlng = new google.maps.LatLng(<?=$data[0]['latitude']?>,<?=$data[0]['longitude']?>);
				//var myOptions = {
					//zoom: 16,
					//center: latlng,
			    //navigationControl: true,
			    //navigationControlOptions: {
						//style: google.maps.NavigationControlStyle.SMALL,
		        //position: google.maps.ControlPosition.BOTTOM_LEFT
			    //},
					//mapTypeId: google.maps.MapTypeId.ROADMAP
				//};
				//map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);			
				//if (map_loaded == true) {
					//map.panBy(-180,-247); // fixing a bug with setCenter which doesn't seem to do anything on second load
				//} else {
					//map_loaded = true;
				//}
			//}
		</script>
		
	</div>
</div>



